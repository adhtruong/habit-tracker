(this["webpackJsonphabit-tracker"]=this["webpackJsonphabit-tracker"]||[]).push([[0],{56:function(e,t,n){"use strict";n.r(t);var a,r=n(4),c=n(0),i=n.n(c),s=n(7),l=n.n(s),o=n(9),d=(n(45),n(58)),u=n(59),j=n(30),b=n(10),h=n(15),O=n(61),f=n(62);!function(e){e.ADD_HABIT="ADD_HABIT",e.UPDATE_HABIT="UPDATE_HABIT",e.DELETE_HABIT="DELETE_HABIT"}(a||(a={}));var m=n(29),p=n.n(m),x=n(11),v=n(33),D=function(e){return e.length?Math.max.apply(null,e.map((function(e){return e.id})))+1:1},g=[];var y=Object(x.b)({habits:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.ADD_HABIT:var n=D(e),r=Object(b.a)({id:n,events:[]},t.payload);return[].concat(Object(v.a)(e),[r]);case a.UPDATE_HABIT:return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case a.DELETE_HABIT:return e.filter((function(e){return e.id!==t.payload.id}));default:return e}}}),A="persitantState",T=Object(x.c)(y,function(){try{var e=localStorage.getItem(A);if(null===e)return;return JSON.parse(e)}catch(t){return void console.warn(t)}}());T.subscribe(p()((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem(A,t)}catch(n){console.warn(n)}}(T.getState())}),1e3));var H=T,E=function(){var e=Object(c.useState)({name:"",detail:""}),t=Object(h.a)(e,2),n=t[0],i=t[1];return Object(r.jsxs)(O.a,{inline:!0,children:[Object(r.jsx)(O.a.Control,{className:"mb-2 mr-sm-2",placeholder:"Habit name...",type:"text",value:n.name,onChange:function(e){return i(Object(b.a)(Object(b.a)({},n),{},{name:e.target.value}))}}),Object(r.jsx)(O.a.Control,{className:"mb-2 mr-sm-2",placeholder:"Details...",type:"text",value:n.detail,onChange:function(e){return i(Object(b.a)(Object(b.a)({},n),{},{detail:e.target.value}))}}),Object(r.jsx)(f.a,{type:"submit",className:"mb-2 mr-sm-2",onClick:function(e){var t;(e.preventDefault(),n.name)&&(H.dispatch((t=n,{type:a.ADD_HABIT,payload:t})),i({name:"",detail:""}))},children:"Add Habit"})]})},k=n(32),S=function(e){return e.habits},B=n(60),I=function(e){var t=e.handleClose,n=e.habit;if(!n)return Object(r.jsx)("div",{});var i=Object(o.b)(),s=Object(c.useCallback)((function(){return i(function(e){return{type:a.DELETE_HABIT,payload:e}}(n))}),[i]);return Object(r.jsxs)(B.a,{show:!!n,animation:!1,onHide:t,children:[Object(r.jsx)(B.a.Header,{closeButton:!0,children:Object(r.jsx)(B.a.Title,{children:n.name})}),Object(r.jsxs)(B.a.Body,{children:[n.detail?Object(r.jsx)("p",{children:n.detail}):"",Object(r.jsxs)("p",{children:["Habit occurred ",n.events.length," times."]})]}),Object(r.jsxs)(B.a.Footer,{children:[Object(r.jsx)(f.a,{onClick:function(){window.confirm("Are you sure you wish to delete this item?")&&(s(),t())},children:"Delete"}),Object(r.jsx)(f.a,{variant:"secondary",onClick:t,children:"Close"})]})]})},C=i.a.memo(I),w=function(e){var t=e.ticked,n=e.toggleHabit;return Object(r.jsx)("td",{onClick:n,children:t?1:0})};function _(e,t){return t.map((function(t){return{date:t,ticked:-1!==e.events.map((function(e){return e.date.toDateString()})).indexOf(t.toDateString())}}))}var N=function(e){var t=e.habit,n=e.dates,c=e.handleShow,i=Object(o.b)();return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{onClick:function(){return c(t)},children:t.name},t.name),_(t,n).map((function(e){var n=e.ticked,c=e.date;return Object(r.jsx)(w,{ticked:n,date:c,toggleHabit:function(){return i(function(e,t){var n=-1!==e.events.map((function(e){return e.date.toDateString()})).indexOf(t.toDateString()),r=e;return n?r.events=r.events.filter((function(e){return e.date.getDate()!==t.getDate()})):r.events.push({date:t}),{type:a.UPDATE_HABIT,payload:r}}(t,c))}},c.getDate())}))]})};var L=function(e){var t=e.dates,n=Object(o.c)(S),a=Object(c.useState)(null),i=Object(h.a)(a,2),s=i[0],l=i[1],d=function(e){return l(e)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(k.a,{responsive:!0,striped:!0,bordered:!0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Habit"},"title"),t.map((function(e){return Object(r.jsx)("th",{children:e.toLocaleDateString()},e.getDate())}))]})}),Object(r.jsx)("tbody",{children:n.map((function(e){return Object(r.jsx)(N,{habit:e,dates:t,handleShow:d},e.id)}))})]}),Object(r.jsx)(C,{handleClose:function(){return l(null)},habit:s})]})};var J=function(){var e,t=(e=7,Array.from(Array(e).keys()).map((function(e){var t=new Date;return t.setDate(t.getDate()-e),t})));return Object(r.jsxs)("div",{className:"App p-4",children:[Object(r.jsx)("h1",{className:"text-center",children:"Habit Tracker"}),Object(r.jsxs)(d.a,{fluid:"md",children:[Object(r.jsx)(u.a,{className:"p-2",children:Object(r.jsx)(j.a,{children:Object(r.jsx)(E,{})})}),Object(r.jsx)(u.a,{className:"p-2",children:Object(r.jsx)(j.a,{children:Object(r.jsx)(L,{dates:t})})})]})]})};l.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(o.a,{store:H,children:Object(r.jsx)(J,{})})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.ac19e544.chunk.js.map