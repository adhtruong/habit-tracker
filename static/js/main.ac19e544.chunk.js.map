{"version":3,"sources":["features/habits/types.ts","features/habits/reducer.ts","features/index.ts","store.ts","components/HabitAdder.tsx","features/habits/actions.ts","features/selectors.ts","components/HabitEdit.tsx","components/HabitTable.tsx","App.tsx","getDates.ts","index.tsx"],"names":["HabitActionTypes","nextID","habits","length","Math","max","apply","map","habit","id","initialHabits","rootReducer","combineReducers","state","action","type","ADD_HABIT","newID","newHabit","events","payload","UPDATE_HABIT","DELETE_HABIT","filter","_persistantState","store","createStore","serialisedState","localStorage","getItem","JSON","parse","e","console","warn","loadFromLocalStorage","subscribe","throttle","stringify","setItem","saveToLocalStorage","getState","HabitAdder","useState","name","detail","input","setInput","Form","inline","Control","className","placeholder","value","onChange","target","Button","onClick","habitInput","preventDefault","dispatch","allHabits","HabitEdit","handleClose","useDispatch","handleDelete","useCallback","deleteHabit","Modal","show","animation","onHide","Header","closeButton","Title","Body","Footer","window","confirm","variant","React","memo","HabitCell","ticked","toggleHabit","getRowData","dates","date","event","toDateString","indexOf","HabitRow","handleShow","isSelected","updatedHabit","getDate","push","toggleHabitEvent","HabitTable","useSelector","selectedHabit","setSelectedHabit","Table","responsive","striped","bordered","toLocaleDateString","App","number","Array","from","keys","i","d","Date","setDate","Container","fluid","Row","Col","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ac19e544.chunk.js","sourcesContent":["export interface HabitInput {\n  name: string;\n  detail: string;\n}\n\nexport type HabitState = Habit[];\n\nexport enum HabitActionTypes {\n  ADD_HABIT = \"ADD_HABIT\",\n  UPDATE_HABIT = \"UPDATE_HABIT\",\n  DELETE_HABIT = \"DELETE_HABIT\",\n}\n\ninterface AddHabitAction {\n  type: HabitActionTypes.ADD_HABIT;\n  payload: HabitInput;\n}\n\ninterface UpdateHabitAction {\n  type: HabitActionTypes.UPDATE_HABIT;\n  payload: Habit;\n}\n\ninterface DeleteHabitAction {\n  type: HabitActionTypes.DELETE_HABIT;\n  payload: Habit;\n}\n\nexport type HabitActionInterface =\n  | AddHabitAction\n  | UpdateHabitAction\n  | DeleteHabitAction;\n","import { HabitActionTypes, HabitState, HabitActionInterface } from \"./types\";\n\nconst nextID = (habits: Habit[]) => {\n  if (!habits.length) {\n    return 1;\n  }\n  const maxID = Math.max.apply(\n    null,\n    habits.map((habit) => habit.id),\n  );\n  return maxID + 1;\n};\n\nconst initialHabits: HabitState = [];\n\nexport default function habitReducer(\n  state = initialHabits,\n  action: HabitActionInterface,\n): HabitState {\n  switch (action.type) {\n    case HabitActionTypes.ADD_HABIT:\n      const newID = nextID(state);\n      const newHabit: Habit = { id: newID, events: [], ...action.payload };\n      return [...state, newHabit];\n    case HabitActionTypes.UPDATE_HABIT:\n      return state.map((habit) =>\n        habit.id === action.payload.id ? action.payload : habit,\n      );\n    case HabitActionTypes.DELETE_HABIT:\n      return state.filter((habit) => habit.id !== action.payload.id);\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\n\nimport habitReducer from \"./habits/reducer\";\n\nconst rootReducer = combineReducers({\n  habits: habitReducer,\n});\n\nexport default rootReducer;\nexport type RootState = ReturnType<typeof rootReducer>;\n","import throttle from \"lodash/throttle\";\nimport { createStore } from \"redux\";\n\nimport rootReducer, { RootState } from \"./features\";\n\nconst _persistantState = \"persitantState\";\n\nconst saveToLocalStorage = (state: RootState) => {\n  try {\n    const serialisedState = JSON.stringify(state);\n    localStorage.setItem(_persistantState, serialisedState);\n  } catch (e) {\n    console.warn(e);\n  }\n};\n\nconst loadFromLocalStorage = () => {\n  try {\n    const serialisedState = localStorage.getItem(_persistantState);\n    if (serialisedState === null) return undefined;\n    return JSON.parse(serialisedState);\n  } catch (e) {\n    console.warn(e);\n    return undefined;\n  }\n};\n\nconst store = createStore(rootReducer, loadFromLocalStorage());\n\nstore.subscribe(throttle(() => saveToLocalStorage(store.getState()), 1000));\n\nexport default store;\n","import React, { useState } from \"react\";\n\nimport { Form, Button } from \"react-bootstrap\";\n\nimport { addHabit } from \"../features/habits/actions\";\nimport { HabitInput } from \"../features/habits/types\";\nimport store from \"../store\";\n\nconst HabitAdder = (): JSX.Element => {\n  const [input, setInput] = useState<HabitInput>({ name: \"\", detail: \"\" });\n\n  return (\n    <Form inline>\n      <Form.Control\n        className=\"mb-2 mr-sm-2\"\n        placeholder=\"Habit name...\"\n        type=\"text\"\n        value={input.name}\n        onChange={(e) => setInput({ ...input, name: e.target.value })}\n      />\n      <Form.Control\n        className=\"mb-2 mr-sm-2\"\n        placeholder=\"Details...\"\n        type=\"text\"\n        value={input.detail}\n        onChange={(e) => setInput({ ...input, detail: e.target.value })}\n      />\n      <Button\n        type=\"submit\"\n        className=\"mb-2 mr-sm-2\"\n        onClick={(e) => {\n          e.preventDefault();\n          if (!input.name) return;\n          store.dispatch(addHabit(input));\n          setInput({ name: \"\", detail: \"\" });\n        }}\n      >\n        Add Habit\n      </Button>\n    </Form>\n  );\n};\n\nexport default HabitAdder;\n","import { HabitInput, HabitActionInterface, HabitActionTypes } from \"./types\";\n\nexport function addHabit(habitInput: HabitInput): HabitActionInterface {\n  return {\n    type: HabitActionTypes.ADD_HABIT,\n    payload: habitInput,\n  };\n}\n\nexport function updateHabit(habit: Habit): HabitActionInterface {\n  return {\n    type: HabitActionTypes.UPDATE_HABIT,\n    payload: habit,\n  };\n}\n\nexport function toggleHabitEvent(\n  habit: Habit,\n  date: Date,\n): HabitActionInterface {\n  const isSelected =\n    habit.events\n      .map((event) => event.date.toDateString())\n      .indexOf(date.toDateString()) !== -1;\n\n  const updatedHabit = habit;\n  if (isSelected)\n    updatedHabit.events = updatedHabit.events.filter(\n      (event) => event.date.getDate() !== date.getDate(),\n    );\n  else updatedHabit.events.push({ date: date });\n\n  return {\n    type: HabitActionTypes.UPDATE_HABIT,\n    payload: updatedHabit,\n  };\n}\n\nexport function deleteHabit(habit: Habit): HabitActionInterface {\n  return {\n    type: HabitActionTypes.DELETE_HABIT,\n    payload: habit,\n  };\n}\n","import { RootState } from \".\";\nimport * as habitSelectors from \"./habits/selectors\";\n\nexport const allHabits = (state: RootState): Habit[] =>\n  habitSelectors.allHabit(state.habits);\n","import React, { useCallback } from \"react\";\n\nimport { Button, Modal } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\n\nimport { deleteHabit } from \"../features/habits/actions\";\n\ninterface Props {\n  handleClose: () => void;\n  habit: Habit | null;\n}\n\nconst HabitEdit = ({ handleClose, habit }: Props): JSX.Element => {\n  if (!habit) {\n    return <div></div>;\n  }\n\n  const dispatch = useDispatch();\n  const handleDelete = useCallback(() => dispatch(deleteHabit(habit)), [\n    dispatch,\n  ]);\n\n  return (\n    <Modal show={!!habit} animation={false} onHide={handleClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>{habit.name}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        {habit.detail ? <p>{habit.detail}</p> : \"\"}\n        <p>Habit occurred {habit.events.length} times.</p>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button\n          onClick={() => {\n            if (!window.confirm(\"Are you sure you wish to delete this item?\"))\n              return;\n            handleDelete();\n            handleClose();\n          }}\n        >\n          Delete\n        </Button>\n        <Button variant=\"secondary\" onClick={handleClose}>\n          Close\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nexport default React.memo(HabitEdit);\n","import React, { useState } from \"react\";\n\nimport Table from \"react-bootstrap/Table\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { toggleHabitEvent } from \"../features/habits/actions\";\nimport { allHabits } from \"../features/selectors\";\nimport HabitEdit from \"./HabitEdit\";\n\ninterface RowProps {\n  habit: Habit;\n  dates: Date[];\n  handleShow: (habit: Habit) => void;\n}\n\ninterface CellProps {\n  ticked: boolean;\n  date: Date;\n  toggleHabit: () => void;\n}\n\nconst HabitCell: React.FC<CellProps> = ({ ticked, toggleHabit }) => {\n  return <td onClick={toggleHabit}>{ticked ? 1 : 0}</td>;\n};\n\nfunction getRowData(habit: Habit, dates: Date[]) {\n  return dates.map((date) => ({\n    date: date,\n    ticked:\n      habit.events\n        .map((event) => event.date.toDateString())\n        .indexOf(date.toDateString()) !== -1,\n  }));\n}\n\nconst HabitRow: React.FC<RowProps> = ({ habit, dates, handleShow }) => {\n  const dispatch = useDispatch();\n  return (\n    <tr>\n      <td key={habit.name} onClick={() => handleShow(habit)}>\n        {habit.name}\n      </td>\n      {getRowData(habit, dates).map(({ ticked, date }) => {\n        return (\n          <HabitCell\n            key={date.getDate()}\n            ticked={ticked}\n            date={date}\n            toggleHabit={() => dispatch(toggleHabitEvent(habit, date))}\n          />\n        );\n      })}\n    </tr>\n  );\n};\n\nfunction HabitTable({ dates }: { dates: Date[] }): JSX.Element {\n  const habits = useSelector(allHabits);\n\n  const [selectedHabit, setSelectedHabit] = useState<Habit | null>(null);\n\n  const handleClose = () => setSelectedHabit(null);\n  const handleShow = (habit: Habit) => setSelectedHabit(habit);\n\n  return (\n    <>\n      <Table responsive striped bordered>\n        <thead>\n          <tr>\n            <th key=\"title\">Habit</th>\n            {dates.map((date) => (\n              <th key={date.getDate()}>{date.toLocaleDateString()}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {habits.map((habit) => (\n            <HabitRow\n              key={habit.id}\n              habit={habit}\n              dates={dates}\n              handleShow={handleShow}\n            />\n          ))}\n        </tbody>\n      </Table>\n\n      <HabitEdit handleClose={handleClose} habit={selectedHabit}></HabitEdit>\n    </>\n  );\n}\n\nexport default HabitTable;\n","import React from \"react\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport { Container, Row, Col } from \"react-bootstrap\";\n\n// import HabitList from \"./components/HabitList\";\nimport HabitAdder from \"./components/HabitAdder\";\nimport HabitTable from \"./components/HabitTable\";\nimport { getDates } from \"./getDates\";\n\nfunction App(): JSX.Element {\n  const dates = getDates(7);\n\n  return (\n    <div className=\"App p-4\">\n      <h1 className=\"text-center\">Habit Tracker</h1>\n      <Container fluid=\"md\">\n        {/* <Row className=\"p-2\">\n          <Col>\n            <HabitList habits={habits} />\n          </Col>\n        </Row> */}\n        <Row className=\"p-2\">\n          <Col>\n            <HabitAdder />\n          </Col>\n        </Row>\n        <Row className=\"p-2\">\n          <Col>\n            <HabitTable dates={dates} />\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","export function getDates(number: number): Date[] {\n  const days = Array.from(Array(number).keys());\n  return days.map((i) => {\n    const d = new Date();\n    d.setDate(d.getDate() - i);\n    return d;\n  });\n}\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport App from \"./App\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}